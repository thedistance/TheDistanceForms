<!DOCTYPE html>
<html lang="en">
  <head>
    <title>TheDistanceFormsPhotosVideos  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="TheDistanceFormsPhotosVideos  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">TheDistanceFormsPhotosVideos Docs</a> (0% documented)</p>
        <p class="header-right"><a href="https://github.com/thedistance/TheDistanceForms"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">TheDistanceFormsPhotosVideos Reference</a>
        <img id="carat" src="img/carat.png" />
        TheDistanceFormsPhotosVideos  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/PhotoCollectionViewCell.html">PhotoCollectionViewCell</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PhotosStack.html">PhotosStack</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PhotosStackManager.html">PhotosStackManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/VideoCollectionViewCell.html">VideoCollectionViewCell</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Global Variables.html">Global Variables</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Global Variables.html#/s:v28TheDistanceFormsPhotosVideos33MovieCollectionViewCellIdentifierSS">MovieCollectionViewCellIdentifier</a>
              </li>
              <li class="nav-group-task">
                <a href="Global Variables.html#/s:v28TheDistanceFormsPhotosVideos33PhotoCollectionViewCellIdentifierSS">PhotoCollectionViewCellIdentifier</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/PhotosStackAsset.html">PhotosStackAsset</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF28TheDistanceFormsPhotosVideosoi2eeFTOS_16PhotosStackAssetS0__Sb">==(_:_:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/PhotosStackManagerDelegate.html">PhotosStackManagerDelegate</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <a href='#thedistanceforms' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='thedistanceforms'>TheDistanceForms</h1>

<p><a href="https://github.com/Carthage/Carthage"><img src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat" alt="Carthage Compatible"></a>
<img src="https://img.shields.io/badge/license-MIT-lightgrey.svg" alt="MIT license"></p>

<p>TheDistanceForms is an iOS framework for creating flexible forms as generic collections of user input elements.</p>
<a href='#features' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='features'>Features</h2>
<li>[x] Multiple user input types
<li>Text (Single / Multiline)</li>
<li>Boolean</li>
<div class="aside aside-date">
    <p class="aside-title">Date</p>
    Date &amp; Times

</div>
<li>Selection</li>
<li>Media (Image / Video)</li></li>
<li>[x] Prebuilt validation types

<ul>
<li>Empty entry</li>
<li>Email</li>
<li>Postcode</li>
<li>Regex</li>
</ul></li>
<li>[x] Custom generic validation</li>
<li>[x] Customisable layout and styling</li>
<li>[x] JSON form creation</li>

<p><img src="Documentation/Images/TestForm.png" alt="Default form UI">
<img src="Documentation/Images/CustomLayoutForm.png" alt="Custom Layout Form">
<img src="Documentation/Images/ThemeForm.png" alt="Themed Form"></p>
<a href='#component_libraries' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='component_libraries'>Component Libraries</h2>

<p>In order to keep this library focussed, additional functionality is available in other libraries available from The Distance.</p>

<ul>
<li><a href="">TheDistanceCore</a></li>
<li><a href="">KeyboardResponder</a></li>
<li><a href="">SelectionViewController</a></li>
</ul>
<a href='#requirements' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='requirements'>Requirements</h2>

<ul>
<li>iOS 8.0+</li>
<li>Xcode 7.3+</li>
</ul>
<a href='#installation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='installation'>Installation</h2>
<a href='#carthage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='carthage'>Carthage</h3>

<p><a href="https://github.com/Carthage/Carthage">Carthage</a> is a decentralized dependency manager that builds your dependencies and provides you with binary frameworks.</p>

<p>Carthage is the recommended way of integrating this into your project.</p>
<a href='#usage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='usage'>Usage</h2>
<a href='#quick_start' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='quick_start'>Quick Start</h3>

<p>The simplest way to get started is to define a <a href="#json-form-set-up">JSON Form</a>. Once you have defined your form you create a <code>Form</code> object from a <a href="https://github.com/SwiftyJSON/SwiftyJSON">SwiftyJSON</a> representation of your data.</p>
<pre class="highlight plaintext"><code>guard let data = NSData(contentsOfURL: jsonURL),
    let form = Form(definition: JSON(data:data))
    else {
        return nil
}
</code></pre>

<p>This holds references to all of the views and question objects in your form. <code>FormContainer</code> is a protocol providing default functionality for setting up your form, keyboard input and view hierarchy.</p>

<p>Create a <code>UIViewController</code> conforming to <code>FormContainer</code> and you can set up your form as follows:</p>
<pre class="highlight plaintext"><code>var form:Form?
var keyboardResponder:KeyboardResponder?

override func viewDidLoad() {
    super.viewDidLoad()

    guard let jsonURL = NSBundle.mainBundle().URLForResource("Form", withExtension: "json"),
        let form = addFormFromURL(jsonURL, toContainerView: scrollView, withInsets: UIEdgeInsetsMake(16.0, 16.0, 16.0, 8.0))
        else { return }

    self.form = form
    keyboardResponder = setUpKeyboardResponder(onForm: form, withScrollView: scroll)
}
</code></pre>

<p><code>addFormFromURL(_:toContainerView:withInsets)</code> creates the form and adds all the questions in a vertical stack to the <code>containerView</code> parameter, in this case a <code>UIScrollView</code> instance. This is the default UI:</p>

<p><code>setUpKeyboardResponder(onForm:withScrollView:)</code> configures a <a href="">KeyboardResponder</a> object to manage user navigation between fields.</p>

<p><img src="Documentation/Images/TestForm.png" alt="Default form UI"></p>

<p><em>The repo project contains a Demo app with examples of a basic JSON form and a customised form.</em></p>
<a href='#validation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='validation'>Validation</h3>

<p>Form validation is performed on a per question basis, and runs when that question field resigns first responder status or when <code>form.validateForm()</code> or <code>form.validateValues()</code> is called, whichever is first. Validation specified in JSON is limited, however if specified in code any validation can be performed using a  Validation type object:</p>
<pre class="highlight plaintext"><code>public struct Validation&lt;Type&gt; { ... }
</code></pre>

<p>Convenience initialisers are available for:</p>

<ul>
<li>NonEmpty strings</li>
<li>String Regex</li>
<li>Email</li>
<li>Postcode</li>
<li>Telephone</li>
<li>Generic Number</li>
</ul>

<p>Validation elements can also be composed e.g. Telephone OR Email Address.</p>
<a href='#getting_answers' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='getting_answers'>Getting Answers</h3>

<p>The simplest way to get answers from a form is to add a submit button. The default implementation of <code>FormContainer</code> adds a target to each <code>Button</code> which will call through to <code>buttonTappedForQuestion(_:)</code>. You can use the <code>question.key</code> to determine which of the buttons in your form has been tapped, and thus respond to your submit button.</p>

<p><code>form.validateForm()</code> can be used to get an array of <code>ValidationResult</code> for each question. You can respond to this to show alerts or if the total result is <code>.Valid</code> get submit the user&rsquo;s response to a server.</p>

<p><code>form.answersJSON()</code> returns a <code>SwiftyJSON</code> dictionary of the question <code>key</code> and the user&rsquo;s response. If there is no response, <code>null</code> is added to the dictionary for that <code>key</code>.</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"birthday"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"first_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Josh"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"station"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"London King's Cross"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"newsletter"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"contact"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"event_start"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-25 15:35:03 +0000"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<a href='#json_form_set_up' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='json_form_set_up'>JSON Form Set Up</h3>

<p>The simplest way to get started is to define a JSON form. The full schema is defined in the repo (/Documentation/Schema.json) and can be used for validation on sites such as <a href="http://jsonschemalint.com/draft4/#">JSON Schema Lint</a>. A Form has a <code>title</code> and <code>questions</code> array, and should be the root object of the JSON.</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New Booking"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"questions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="err">...</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Each question requires a <code>key</code> and a <code>question_type</code> and can optionally take a <code>validation</code>. Each type has various properties for how that question is customised.</p>
<a href='#free_text_entry' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='free_text_entry'>Free Text Entry</h4>

<p>Free text entry can be added using <code>TextSingle</code> and <code>TextMultiline</code>. <code>TextSingle</code> is backed by a <code>TextFieldStack</code>, <code>TextMultiline</code> is backed by a <code>TextViewStack</code>. They add error showing a placeholder functionality to <code>UITextField</code> and <code>UITextView</code> respectively.</p>

<p><img src="Documentation/Images/TextFieldStack.png" alt="`TextFieldStack` showing an error and placeholder."></p>

<p>A simple notes text field could be represented by:</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"notes"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"question_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TextMultiline"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"prompt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Notes"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This will add a text view with placeholder text <q>Notes</q> to your form.</p>

<p>More configuration is available, a title text field with validation and extra capitalisation could be represented by:</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"booking_title"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"question_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TextSingle"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"prompt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Title"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"capitalization"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Words"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"validation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NotEmpty"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"String"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Please enter a title for your booking."</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w"> 
</span></code></pre>

<p>Full details can be found in the schema space</p>
<a href='#choices' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='choices'>Choices</h4>

<p>Simple selection can be added backed by either a <code>UISegmentedControl</code> or a <code>UIPickerView</code>. A segmented choice returns its values for validation as indexes in the array of choices. The only validation specifiable in the form is <code>NotEmpty</code>. As there is no text view for a prompt, a segmented choice has a title and a subtitle.</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contact"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"question_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ChoiceSegments"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Contact Preferences"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"How would you like us to keep in touch with you?"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"choices"</span><span class="p">:[</span><span class="w">
        </span><span class="s2">"Email"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Phone"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"SMS"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"validation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NotEmpty"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Number"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You must select a preference"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><img src="Documentation/Images/SegmentedStack.png" alt="Segmented Choice view"></p>

<p>A dropdown choice displays its choices in a <code>UIPickerView</code> and can therefore be used for longer lists of choices. Validation is using a String and so more validation types are available.</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"station"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"question_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ChoiceDropdown"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"prompt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Select a station"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"choices"</span><span class="p">:[</span><span class="w">
        </span><span class="s2">"London King's Cross"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Peterborough"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"York"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Darlington"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Durham"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Newcastle"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Edinburgh Weverley"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"validation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NotEmpty"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"value_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"String"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You must select a station"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><img src="Documentation/Images/Dropdown.png" alt="Dropdown Choices"></p>
<a href='#boolean' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='boolean'>Boolean</h4>

<p>Simple Yes/No questions can be added using a switch. These could be <q>Opt in to our Newsletter</q> or you can add validation to ensure the user has agreed to Terms &amp; Conditions.</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newsletter"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"question_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boolean"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Newsletter"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"subtitle"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Would you like to keep up to date with all our latest news and offers?"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p><img src="Documentation/Images/SwitchStack.png" alt="Switch for boolean form elements"></p>
<a href='#buttons' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='buttons'>Buttons</h4>

<p>Buttons can be added to a form using the <code>Button</code> question type.</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"view_terms"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"question_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Button"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"View Terms &amp; Conditions"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<a href='#customising_a_form' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='customising_a_form'>Customising A Form</h2>

<p>Whilst JSON is convenient it cannot express all the functionality of the framework. You can create a form initially from JSON using a subclass of <code>Form</code> and add extra functionality. This enables custom UI, logic, layout and validations.</p>
<a href='#customising_ui' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='customising_ui'>Customising UI</h3>

<p>The UI is created from <code>FormQuestion.init(json:)</code>. For each question in the JSON definition, depending on the <code>question_type</code> one of <code>textSingleViewForQuestion(_:)</code> and other <code>...ViewForQuestion(_:)</code> methods are called. Where necessary these call <code>newTextSingleView()</code> and other <code>new...View()</code> methods to instantiate the <code>UIView</code>s used to display each question.</p>

<p>To customise the UI, subclass <code>FormQuestion</code> and override these methods. When the form is created, specify a <code>questionType</code> as an initialiser parameter, or as a parameter in the <code>FormContainer</code> creator method.</p>
<pre class="highlight plaintext"><code>class MyFormQuestion {

    override func newTextSingleView() -&gt; TextFieldStack {

        let stack = super.newTextSingleView

        stack.textField.font = ...
        stack.errorLabel.textColor = ...

        return stack
    }

}
</code></pre>

<p>When creating your form</p>
<pre class="highlight plaintext"><code>self.form = Form(definition: JSON(data:data), questionType: MyFormQuestion.self)
</code></pre>
<a href='#themekit_for_styling' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='themekit_for_styling'>ThemeKit for Styling</h4>

<p>As well as subclassing <code>FormQuestion</code> and configuring views in <code>new...View()</code> methods,  TheDistanceForms contains a <a href="https://github.com/joshc89/ThemeKit">ThemeKit</a> compatible framework (TheDistanceFormsThemed) that adds <code>TKTextField</code>, <code>TKTextView</code> and other ThemeKit subclasses for UIKit components. It also adds a <code>TKFormQuestion</code> type that overrides <code>new...View()</code> to return ThemeKit stacks. You can further subclass this to change the styles of the components if desired.</p>

<p>The test form created with a simple Theme of red Accent colour and Avenir Next font styles is shown below.</p>
<pre class="highlight plaintext"><code>let form = addFormFromURL(jsonURL, questionType: TKFormQuestion.self, toContainerView: scroll, withInsets: UIEdgeInsetsMake(16.0, 16.0, 16.0, 8.0))
</code></pre>

<p><img src="Documentation/Images/ThemeForm.png" alt="Themed Form"></p>
<a href='#custom_layout' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='custom_layout'>Custom Layout</h3>

<p><em>Override the default layout and move away from all data input as tables.</em></p>

<p>Custom layout can be achieved by creating a new stack instead of using the <code>formView</code> variable. Views can be accessed using the <code>elementForKey(_:)</code> methods from <code>KeyedView</code>. The keys are the question keys, the views are the UIView&rsquo;s of the <code>QuestionView</code>. In this way a custom view can stack views differently to enable side by side layout of fields such as start and end time, or title, first and last names.</p>

<p>The demo application contains an <code>EventForm.json</code> definition. This contains a <code>TextSingle</code>, two <code>DateTime</code> and a <code>TextMultiline</code> field. <code>BookingForm</code>. To lay the date fields side by side we use a subclass of <code>Form</code>, called <code>EventForm</code>, overriding the <code>createFormView(_:)</code> method.</p>
<pre class="highlight plaintext"><code>class EventForm: Form {

    override func createFormView() -&gt; StackView {

        // 1. Test Views exist
        guard let titleView = self.viewKeys["event_title"],
           let startView = self.viewKeys["start_date"],
            let endView = self.viewKeys["end_date"],
            let notesView = self.viewKeys["notes"]
            else { return super.createFormView() }

        // 2. Align the dates horizontally
        var dateStack = CreateStackView([startView, endView])
        dateStack.spacing = 8.0
        dateStack.stackDistribution = .FillEqually

        // 3. Stack all components vertically
        var stack = CreateStackView([titleView, dateStack.view, notesView])
        stack.axis = .Vertical
        stack.spacing = 16.0

        return stack
    }

}
</code></pre>

<p>We use <a href="https://bitbucket.org/joshcampion89/StackView">StackView</a> to create a UIStackView or <a href="https://github.com/tomvanzummeren/TZStackView/">TZStackView</a> depending on whether you are running on iOS 9 or iOS 8.</p>

<p>This version of the form can then be specified over the default form when we call the <code>FormContainer</code> method to add the Form to our view hierarchy.</p>
<pre class="highlight plaintext"><code>guard let jsonURL = NSBundle.mainBundle().URLForResource("EventForm", withExtension: "json"),
        let form = addFormFromURL(jsonURL, ofType: EventForm.self, toContainerView: formContainer, withInsets: UIEdgeInsetsZero)
        else { return }
</code></pre>

<p>The form is also added to a form container rather than a root view, allowing the form to sit as a small part of the view hierarchy. Providing the KeyboardResponder is set up as before, navigation still works as expected. Much more complex layouts can be created in this way.</p>

<p><img src="Documentation/Images/CustomLayoutForm.png" alt="Custom Layout Form"></p>
<a href='#custom_logic' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='custom_logic'>Custom Logic</h3>

<p><em>Tracking changes to enforce conditions on date selection.</em></p>

<p>You can further extend your Form subclass to add logic that you cannot specify in the JSON format. In the event example we can constrain the dates to be in the future and ensure the end date is after the start date.</p>
<pre class="highlight plaintext"><code>private(set) var startObserver:ObjectObserver!

required init?(definition: JSON, questionType: FormQuestion.Type) {
    super.init(definition: definition, questionType: questionType)

    // 1. Get the date controllers
    guard let startView = questionForKey("start_date")?.questionView,
        case let .DateTime(startStack, startController) = startView,
        let endView = questionForKey("end_date")?.questionView,
        case let .DateTime(_, endController) = endView
        else {
            return nil
    }

    // 2. Set the minimum dates to now
    startController.datePicker.minimumDate = NSDate()
    endController.datePicker.minimumDate = NSDate()

    // 3. When the start date changes, update the end date to be later with a minimum duration
    startObserver = ObjectObserver(keypath: "text", object: startStack.textField, completion: { (keypath, object, change) in
        endController.datePicker.minimumDate = startController.datePicker.date.dateByAddingTimeInterval(30 * 60)
    })
}
</code></pre>

<p>In this way we can build up complex relations between the </p>
<a href='#custom_validation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='custom_validation'>Custom Validation</h3>

<p><em>Implement validation based on other user entry</em></p>

<p>The Register example is a typical register form including name, email address and password. Notice the extra customisation for the email and password fields. The password field also enforces a given format for the password using Regular Expressions.</p>
<pre class="highlight json"><code><span class="w">    </span><span class="p">{</span><span class="w">
        </span><span class="nt">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"question_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TextSingle"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"prompt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"capitalization"</span><span class="p">:</span><span class="w"> </span><span class="s2">".None"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"auto_correction"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nt">"secure_text_entry"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"validation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Regex"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"value_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"String"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"regex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^[a-zA-Z0-9]{6,}$"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Please enter a password at least 6 characters long containing only letters and numbers."</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>

<p>What we cannot specify in JSON is that the confirm field matches. We can do that in code by override the form initialiser and manually creating a <code>Validation&lt;String&gt;</code> object.</p>
<pre class="highlight plaintext"><code>required init?(definition: JSON, questionType: FormQuestion.Type) {
    super.init(definition: definition, questionType: questionType)

    guard let passwordView = questionForKey("password")?.questionView,
        case let .TextSingle(passwordStack) = passwordView,
        let confirmView = questionForKey("confirm_password")?.questionView,
        case let .TextSingle(confirmStack) = confirmView
        else {
            return nil
    }

    confirmStack.validation = Validation(message: "Your passwords must match.", validation: { (value) -&gt; Bool in
        return value == passwordStack.text
    })
}
</code></pre>
<a href='#helper_classes' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='helper_classes'>Helper Classes</h3>

<p>To facilitate form creation multiple classes have been added to complement standard UIKit elements.</p>
<a href='#error_stack' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='error_stack'>Error Stack</h4>

<p>A stack of UI components that can display placeholders, titles and error messages using simple properties.</p>

<ul>
<li><em>See Also: <code>TextFieldStack</code>, <code>TextViewStack</code>, <code>SwitchStack</code></em></li>
</ul>
<a href='#uipicker_amp_uidatepicker_convenience' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='uipicker_amp_uidatepicker_convenience'>UIPicker &amp; UIDatePicker convenience</h4>

<p>A controller <code>NSObject</code> subclass containing boilerplate code to be a delegate for a <code>UIPickerView</code> or <code>UIDatePickerView</code>. This simplifies the set up of a <code>UITextField</code> to be used for date and choice selection.</p>
<a href='#communication' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='communication'>Communication</h2>

<ul>
<li>If you have <strong>found a bug</strong>, open an issue.</li>
<li>If you have <strong>a feature request</strong>, open an issue.</li>
<li>If you <strong>want to contribute</strong>, submit a pull request.</li>
<li>If you&rsquo;d like to <strong>ask a general question</strong>, email us on <a href="mailto:hello+thedistanceforms@thedistance.co.uk">hello+thedistanceforms@thedistance.co.uk</a>.</li>
</ul>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2016 <a class="link" href="https://thedistance.co.uk" target="_blank" rel="external">Josh Campion @ The Distance</a>. All rights reserved. (Last updated: 2016-08-16)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.6.0</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
